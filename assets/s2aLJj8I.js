import{_ as de}from"./Bwxjn92l.js";import{m as K,A as ie,B as se,r as M,C as ve,D as fe,o as u,c as _,u as l,E as pe,_ as q,G as me,H as _e,f as he,a as S,t as te,I as ge,F as P,y as O,v as b,s as R,n as we,p as $,b as I,J as F,K as G,L as ke,q as D,M as z,z as U}from"./BLcmtekx.js";import{u as le,_ as ye}from"./CmmNWaTo.js";import{u as ne}from"./CWfz57DC.js";import{u as oe}from"./fVYStgCy.js";import"./DfjnnZpM.js";const Ce=["placeholder"],be=K({__name:"SearchBar",props:{modelValue:{},modelModifiers:{}},emits:ie(["submit"],["update:modelValue"]),setup(a,{emit:n}){const r=se(a,"modelValue"),i=M("Look for a block"),V=n,B=()=>r.value&&V("submit",r.value);return(w,k)=>ve((u(),_("input",{"onUpdate:modelValue":k[0]||(k[0]=h=>r.value=h),type:"text",placeholder:l(i),onKeydown:pe(B,["enter"])},null,40,Ce)),[[fe,r.value]])}}),Se=q(be,[["__scopeId","data-v-bdde18ca"]]),Ve="data:image/svg+xml,%3csvg%20width='15'%20height='10'%20viewBox='0%200%2015%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.830078%201.4375L7.48735%208.09468L14.1445%201.4375'%20stroke='%238327CB'%20stroke-width='2'/%3e%3c/svg%3e";function Be(a){return me()?(_e(a),!0):!1}function J(a){return typeof a=="function"?a():l(a)}const ae=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Te=Object.prototype.toString,De=a=>Te.call(a)==="[object Object]",W=()=>{},$e=Ee();function Ee(){var a,n;return ae&&((a=window==null?void 0:window.navigator)==null?void 0:a.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const ue=ae?window:void 0;function x(a){var n;const r=J(a);return(n=r==null?void 0:r.$el)!=null?n:r}function H(...a){let n,r,i,V;if(typeof a[0]=="string"||Array.isArray(a[0])?([r,i,V]=a,n=ue):[n,r,i,V]=a,!n)return W;Array.isArray(r)||(r=[r]),Array.isArray(i)||(i=[i]);const B=[],w=()=>{B.forEach(m=>m()),B.length=0},k=(m,T,L,s)=>(m.addEventListener(T,L,s),()=>m.removeEventListener(T,L,s)),h=he(()=>[x(n),J(V)],([m,T])=>{if(w(),!m)return;const L=De(T)?{...T}:T;B.push(...r.flatMap(s=>i.map(c=>k(m,s,c,L))))},{immediate:!0,flush:"post"}),v=()=>{h(),w()};return Be(v),v}let re=!1;function Le(a,n,r={}){const{window:i=ue,ignore:V=[],capture:B=!0,detectIframe:w=!1}=r;if(!i)return W;$e&&!re&&(re=!0,Array.from(i.document.body.children).forEach(s=>s.addEventListener("click",W)),i.document.documentElement.addEventListener("click",W));let k=!0;const h=s=>J(V).some(c=>{if(typeof c=="string")return Array.from(i.document.querySelectorAll(c)).some(y=>y===s.target||s.composedPath().includes(y));{const y=x(c);return y&&(s.target===y||s.composedPath().includes(y))}}),v=s=>{const c=x(a);if(!(!c||c===s.target||s.composedPath().includes(c))){if(s.detail===0&&(k=!h(s)),!k){k=!0;return}n(s)}};let m=!1;const T=[H(i,"click",s=>{m||(m=!0,setTimeout(()=>{m=!1},0),v(s))},{passive:!0,capture:B}),H(i,"pointerdown",s=>{const c=x(a);k=!h(s)&&!!(c&&!s.composedPath().includes(c))},{passive:!0}),w&&H(i,"blur",s=>{setTimeout(()=>{var c;const y=x(a);((c=i.document.activeElement)==null?void 0:c.tagName)==="IFRAME"&&!(y!=null&&y.contains(i.document.activeElement))&&n(s)},0)})].filter(Boolean);return()=>T.forEach(s=>s())}const Pe=["src"],Ae={key:0,class:"list"},Me=["onClick"],Ie=K({__name:"DropDown",props:ie({options:{},placeholder:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const n=se(a,"modelValue"),r=M(null),i=M(!1);Le(r,()=>i.value=!1);const V=()=>i.value=!i.value,B=w=>{n.value=w,i.value=!1};return(w,k)=>{var h;return u(),_("div",{ref_key:"dropdown",ref:r,class:"dropdown"},[S("button",{onClick:V},[S("span",null,te(((h=n.value)==null?void 0:h.label)||w.placeholder||"Select"),1),S("img",{alt:"icon",src:l(Ve),class:ge(["icon",{open:l(i)}])},null,10,Pe)]),l(i)?(u(),_("ul",Ae,[(u(!0),_(P,null,O(w.options,v=>(u(),_("li",{key:v.value,class:"list-item",onClick:m=>B(v)},te(v.label),9,Me))),128))])):b("",!0)],512)}}}),Oe=q(Ie,[["__scopeId","data-v-29b5fce4"]]),xe={class:"main"},Ne={class:"search-container"},Fe={key:0,class:"search-container__text-content"},Ge={class:"search-filter"},Ue={class:"search-bar"},We={class:"dropdowns"},je={class:"content-wrapper"},Re={class:"card-container"},ze={class:"card-container"},He={class:"card-container"},Ke={class:"card-container"},qe=K({__name:"index",setup(a){const{locale:n,buildingBlockCategories:r}=R(ne()),{pages:i}=R(oe()),{getStaticPage:V}=oe(),{blocks:B}=R(le()),{getBlocks:w}=le(),{getBuildingBlockCategories:k}=ne();we(async()=>await Promise.all([k(),w(),V("blocks")]));const h=$(()=>{var d,A,C;if(!i.value.blocks)return null;const e=(d=i.value.blocks)==null?void 0:d.title[n.value],t=(C=(A=i.value.blocks)==null?void 0:A.content)==null?void 0:C.map(g=>g[n.value]);return{title:e,content:t}}),v=$(()=>{const e=[...B.value];return ce({searchTerm:N.value,blocks:e})}),m=$(()=>{var t;if(!r.value)return;const e=(t=r.value)==null?void 0:t.find(({slug:d})=>d==="governance_values");return{title:e==null?void 0:e.title[n.value],description:e==null?void 0:e.description[n.value]}}),T=$(()=>v.value?v.value.filter(({category:e})=>(e==null?void 0:e.slug)==="governance_values").filter(e=>{var t;return!p.value||!p.value.value?!0:((t=p.value)==null?void 0:t.value)===e.effort}).filter(e=>{var t;return!f.value||!f.value.value?!0:((t=f.value)==null?void 0:t.value)===e.cost}):[]),L=$(()=>{var t;if(!r.value)return;const e=(t=r.value)==null?void 0:t.find(({slug:d})=>d==="culture_skills");return{title:e==null?void 0:e.title[n.value],description:e==null?void 0:e.description[n.value]}}),s=$(()=>v.value?v.value.filter(({category:e})=>(e==null?void 0:e.slug)==="culture_skills").filter(e=>{var t;return!p.value||!p.value.value?!0:((t=p.value)==null?void 0:t.value)===e.effort}).filter(e=>{var t;return!f.value||!f.value.value?!0:((t=f.value)==null?void 0:t.value)===e.cost}):[]),c=$(()=>{var t;if(!r.value)return;const e=(t=r.value)==null?void 0:t.find(({slug:d})=>d==="communication_involvement");return{title:e==null?void 0:e.title[n.value],description:e==null?void 0:e.description[n.value]}}),y=$(()=>v.value?v.value.filter(({category:e})=>(e==null?void 0:e.slug)==="communication_involvement").filter(e=>{var t;return!p.value||!p.value.value?!0:((t=p.value)==null?void 0:t.value)===e.effort}).filter(e=>{var t;return!f.value||!f.value.value?!0:((t=f.value)==null?void 0:t.value)===e.cost}):[]),Q=$(()=>{var t;if(!r.value)return;const e=(t=r.value)==null?void 0:t.find(({slug:d})=>d==="methods_processes");return{title:e==null?void 0:e.title[n.value],description:e==null?void 0:e.description[n.value]}}),X=$(()=>v.value?v.value.filter(({category:e})=>(e==null?void 0:e.slug)==="methods_processes").filter(e=>{var t;return!p.value||!p.value.value?!0:((t=p.value)==null?void 0:t.value)===e.effort}).filter(e=>{var t;return!f.value||!f.value.value?!0:((t=f.value)==null?void 0:t.value)===e.cost}):[]),N=M(""),Y=[{label:"Category",value:null},{label:"Governance & values",value:"governance_values"},{label:"Culture & skills",value:"culture_skills"},{label:"Communication & involvement",value:"communication_involvement"},{label:"Methods & processes",value:"methods_processes "}],Z=[{label:"Cost",value:null},{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"}],ee=[{label:"Difficulty",value:null},{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"}],E=M(Y[0]),f=M(Z[0]),p=M(ee[0]);function ce({blocks:e,searchTerm:t}){if(!t||!t.length)return e;const d=t.toLowerCase();function A(C){for(const g in C)if(C[g]){const o=C[g];if(typeof o=="string"){if(o.toLowerCase().includes(d))return!0}else if(typeof o=="object"&&o!==null&&A(o))return!0}return!1}return e.filter(C=>A(C))}return(e,t)=>{const d=de,A=Se,C=Oe,g=ye;return u(),_("main",xe,[S("div",Ne,[l(h)?(u(),_("div",Fe,[I(d,{html:"",onDark:"",title:l(h).title,description:l(h).content[0]},null,8,["title","description"])])):b("",!0),S("div",Ge,[S("div",Ue,[I(A,{modelValue:l(N),"onUpdate:modelValue":t[0]||(t[0]=o=>F(N)?N.value=o:null)},null,8,["modelValue"])]),S("div",We,[I(C,{modelValue:l(E),"onUpdate:modelValue":t[1]||(t[1]=o=>F(E)?E.value=o:null),options:Y,placeholder:"Category"},null,8,["modelValue"]),I(C,{modelValue:l(f),"onUpdate:modelValue":t[2]||(t[2]=o=>F(f)?f.value=o:null),options:Z,placeholder:"Cost"},null,8,["modelValue"]),I(C,{modelValue:l(p),"onUpdate:modelValue":t[3]||(t[3]=o=>F(p)?p.value=o:null),options:ee,placeholder:"Difficulty"},null,8,["modelValue"])])])]),S("div",je,[!l(E).value||l(E).value==="governance_values"?(u(),_(P,{key:0},[I(d,G(ke(l(m))),null,16),S("div",Re,[(u(!0),_(P,null,O(l(T),o=>(u(),D(g,{key:o.id,title:o.title[l(n)],description:o.description[l(n)],categories:[o.category.title[l(n)]],url:o.id,onClick:j=>("navigateTo"in e?e.navigateTo:l(U))(`/building-blocks/${o.id}`)},null,8,["title","description","categories","url","onClick"]))),128)),l(T).length?b("",!0):(u(),D(g,{key:0,title:"Not found",color:"secondary",description:"Try another search filter"}))])],64)):b("",!0),!l(E).value||l(E).value==="culture_skills"?(u(),_(P,{key:1},[l(L)?(u(),D(d,G(z({key:0},l(L))),null,16)):b("",!0),S("div",ze,[(u(!0),_(P,null,O(l(s),o=>(u(),D(g,{key:o.id,title:o.title[l(n)],description:o.description[l(n)],categories:[o.category.title[l(n)]],url:o.id,color:"primary",onClick:j=>("navigateTo"in e?e.navigateTo:l(U))(`/building-blocks/${o.id}`)},null,8,["title","description","categories","url","onClick"]))),128)),l(s).length?b("",!0):(u(),D(g,{key:0,title:"Not found",color:"secondary",description:"Try another search filter"}))])],64)):b("",!0),!l(E).value||l(E).value==="communication_involvement"?(u(),_(P,{key:2},[l(c)?(u(),D(d,G(z({key:0},l(c))),null,16)):b("",!0),S("div",He,[(u(!0),_(P,null,O(l(y),o=>(u(),D(g,{key:o.id,title:o.title[l(n)],description:o.description[l(n)],categories:[o.category.title[l(n)]],url:o.id,color:"primary",onClick:j=>("navigateTo"in e?e.navigateTo:l(U))(`/building-blocks/${o.id}`)},null,8,["title","description","categories","url","onClick"]))),128)),l(y).length?b("",!0):(u(),D(g,{key:0,title:"Not found",color:"secondary",description:"Try another search filter"}))])],64)):b("",!0),l(Q)?(u(),D(d,G(z({key:3},l(Q))),null,16)):b("",!0),S("div",Ke,[(u(!0),_(P,null,O(l(X),o=>(u(),D(g,{key:o.id,title:o.title[l(n)],description:o.description[l(n)],categories:[o.category.title[l(n)]],url:o.id,color:"primary",onClick:j=>("navigateTo"in e?e.navigateTo:l(U))(`/building-blocks/${o.id}`)},null,8,["title","description","categories","url","onClick"]))),128)),l(X).length?b("",!0):(u(),D(g,{key:0,title:"Not found",color:"secondary",description:"Try another search filter"}))])])])}}}),tt=q(qe,[["__scopeId","data-v-29a4ecc5"]]);export{tt as default};
